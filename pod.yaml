apiVersion: v1
kind: ServiceAccount
metadata:
  name: pod-informer
  namespace: default
---
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: pod-informer-binding
subjects:
- kind: ServiceAccount
  name: pod-informer
  namespace: default
roleRef:
  kind: ClusterRole
  name: cluster-admin
  apiGroup: rbac.authorization.k8s.io
---
apiVersion: v1
kind: Pod
metadata:
  name: pod-informer
  namespace: default
spec:
  serviceAccountName: pod-informer
  containers:
  - name: pod-informer
    image: frank0757/pod-informer:v1
    imagePullPolicy: Always
    resources:
      limits:
        memory: "20Mi"
      requests:
        memory: "10Mi"
    command: ["/pod-informer"]
